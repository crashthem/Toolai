jQuery(document).ready(function(o){"use strict";function e(){let e=o(".woo_sc_table_design");e.find(".tr:first").find(".td").css("background-color",o("#woo_sc_head_color").val()),e.find(".tr:first").find(".td").find('input[type="text"]').css("background-color",o("#woo_sc_head_color").val()),o(".tr:first").find(".td").find('input[type="text"]').css("color",o("#woo_sc_text_head_color").val());let t=o(".woo_sc_table_design").find(".tr").length;for(let l=0;l<t;l++)l>0&&l%2==0&&(e.find(".tr").eq(l).find(".td").css("background-color",o("#woo_sc_even_rows_color").val()),e.find(".tr").eq(l).find(".td").find('input[type="text"]').css("background-color",o("#woo_sc_even_rows_color").val()),e.find(".tr").eq(l).find(".td").find('input[type="text"]').css("color",o("#woo_sc_even_rows_text_color").val())),l>0&&l%2!=0&&(e.find(".tr").eq(l).find(".td").find('input[type="text"]').css("background-color",o("#woo_sc_odd_rows_color").val()),e.find(".tr").eq(l).find(".td").css("background-color",o("#woo_sc_odd_rows_color").val()),e.find(".tr").eq(l).find(".td").find('input[type="text"]').css("color",o("#woo_sc_odd_rows_text_color").val()))}function t(o){let e="<tr class='tr'>";for(let t=0;t<o;t++)e+="<td class='td'><div class='woo_sc_table_input'><input type='text' placeholder='Enter text..' class='input' name='inputTable' autocomplete='off'></div>";return e+='<td class="woo_sc_row_header"><div class="woo_sc_div_tablebutton_rows"><button  type="button" class="tableButton addrows">+</button><button  type="button" class="tableButton delrows" disabled>-</button></div></td>',e+="</tr>"}e(),o(".dropdown").dropdown();var l=o(".tr").length,s="";function d(){let e,t,l,s,d,r=[],_=[];for(e=o(".bodyTable").find(".tr").length,t=o(".bodyTable").find(".tr").eq(0).find(".td").length,l=0;l<e;l++){for(r[l]=[],_[l]=0,s=0;s<t;s++){let e=o(".tr").eq(l).find(".td").eq(s).find("input[type='text']").val();r[l][s]=e,0===e.length&&_[l]++}_[l]===t&&r.splice(l,1)}return d=r.filter(o=>"empty"!==o)}function r(){o("#woo_sc_horizontal_width").trigger("change"),o("#woo_sc_vertical_width").trigger("change")}function _(e,t,l,s,d,r,_,i,c,n,a){o("#woo_sc_head_color").val(e).trigger("change"),o("#woo_sc_text_head_color").val(t).trigger("change"),o("#woo_sc_even_rows_color").val(l).trigger("change"),o("#woo_sc_even_rows_text_color").val(s).trigger("change"),o("#woo_sc_odd_rows_color").val(d).trigger("change"),o("#woo_sc_odd_rows_text_color").val(r).trigger("change"),void 0!==_&&""!==_?o("#woo_sc_horizontal_width").val(_).trigger("change"):(_=1,o("#woo_sc_horizontal_width").val(_).trigger("change")),void 0!==i&&""!==i?o("#woo_sc_horizontal_border_style").val(i).trigger("change"):(i="solid",o("#woo_sc_horizontal_border_style").val(i).trigger("change")),void 0!==c&&""!==c?o("#woo_sc_vertical_width").val(c).trigger("change"):(c=1,o("#woo_sc_vertical_width").val(c).trigger("change")),void 0!==n&&""!==n?o("#woo_sc_vertical_border_style").val(n).trigger("change"):(n="solid",o("#woo_sc_vertical_border_style").val(n).trigger("change")),void 0!==a&&""!==a?o("#woo_sc_border_color").val(a).trigger("change"):(a="#cccccc",o("#woo_sc_border_color").val(a).trigger("change"))}l>1&&(o(".delrows").removeAttr("disabled"),o(".delrows").addClass("enable")),o(".delcol").length>1&&(o(".delcol").removeAttr("disabled"),o(".delcol").addClass("enable")),o(".bodyTable").on("click",".addrows",function(l){let s=t(o(this).closest("tr").find(".td").length);o(this).closest("tr").after(s),e(),r(),o(".tr").length>1&&(o(".delrows").removeAttr("disabled"),o(".delrows").addClass("enable"))}),o(".bodyTable").on("click",".addcol",function(t){var l,s,d;for("<div class='woo_sc_table_input'><input type='text' class='input' name='inputTable'  placeholder='Enter text..' autocomplete='off'></div>","</td>",o(this).closest("td").after("<td><div class='woo_sc_div_tablebutton_cols'><button type='button' class='tableButton addcol'>+</button><button type='button'  class='tableButton delcol' disabled>-</button></div></td>"),l=o(".addcol").index(o(this)),s=o(".bodyTable .tr").length,d=0;d<s;d++)o(".tr").eq(d).find(".td").eq(l).after("<td class='td'><div class='woo_sc_table_input'><input type='text' class='input' name='inputTable'  placeholder='Enter text..' autocomplete='off'></div></td>");o(".delcol").length>1&&(o(".delcol").removeAttr("disabled"),o(".delcol").addClass("enable")),e(),r()}),o(".woo_sc_table_design").on("click",".delrows",function(t){o(".tr").length-1<2&&(o(".delrows").attr("disabled",!0),o(".delrows").removeClass("enable")),o(this).closest("tr").remove(),e()}),o(".woo_sc_table_design").on("click",".delcol",function(t){var l,s,d;for(l=o(".delcol").index(o(this)),s=o(".woo_sc_table_design .tr").length,o(this).closest("td").remove(),d=0;d<s;d++)o(".tr").eq(d).find(".td").eq(l).remove();o(".delcol").length<2&&(o(".delcol").attr("disabled",!0),o(".delcol").removeClass("enable")),e()}),o("#woo_sc_quick_add").on("click",function(){let l=o("#woo_sc_number_rows").val(),s=o(".woo_sc_table_design").find(".tr:first").find(".td").length;if(l>=0&&l<999)for(let d=0;d<l;d++)o(".woo_sc_table_design").append(t(s)),o(".delrows").removeAttr("disabled"),o(".delrows").addClass("enable"),e(),r();else alert("Rows must be more than 0 and less than 999")}),o("#woo_sc_quick_add_col").on("click",function(){let t=o("#woo_sc_number_cols").val(),l=(o(".woo_sc_table_design").find(".tr").length,o(".woo_sc_table_design").find(".tr:first").find(".td").length);if(t>=0&&t<999){let s="<td>";s+="<div class='woo_sc_div_tablebutton_cols'><button  type='button'  class='tableButton addcol'>+</button><button  type='button'  class='tableButton delcol' disabled>-</button></div>",s+="</td>";let d="<td class='td'>";d+="<input type='text' class='input' name='inputTable'  placeholder='Enter text..' autocomplete='off'>",d+="</td>";for(let e=0;e<t;e++)o(".woo_sc_table_design").find("tr").eq(0).find("td").eq(l-1).before(s);for(let e=0;e<t;e++)o(".addrows").closest("td").before(d);o(".delcol").length>1&&(o(".delcol").removeAttr("disabled"),o(".delcol").addClass("enable")),e(),r()}else alert("Columns must be more than 0 and less than 999")}),o("#woo_sc_quick_del").on("click",function(){let t=o("#woo_sc_number_rows").val(),l=o(".woo_sc_table_design").find(".tr").length;if(l>1&&l-t>0){if(t>0)if(1==t){if(confirm("Are you sure to delete "+t+" row?")){for(let e=0;e<t;e++)l>2&&o(".woo_sc_table_design").find(".tr:last").remove(),2==l&&(o(".woo_sc_table_design").find(".tr:last").remove(),o(".delrows").attr("disabled",!0),o(".delrows").removeClass("enable"));e()}}else{if(confirm("Are you sure to delete "+t+" rows?")){for(let e=0;e<t;e++)l>2&&o(".woo_sc_table_design").find(".tr:last").remove(),2==l&&(o(".woo_sc_table_design").find(".tr:last").remove(),o(".delrows").attr("disabled",!0),o(".delrows").removeClass("enable"));e()}}}else alert("The number of deleted rows must be less than the number of rows in the current table!")}),o("#woo_sc_quick_del_col").on("click",function(){let t=o("#woo_sc_number_cols").val(),l=o(".woo_sc_table_design").find(".tr").eq(0).find(".td").length;if(l>1&&l-t>0){if(t>0)if(1==t){if(confirm("Are you sure to delete "+t+" column?")){for(let e=0;e<t;e++)l>2&&(o(".woo_sc_table_design").find(".tr").find(".td:last").remove(),o(".tableButton.addcol:last").closest("td").remove()),2==l&&(o(".woo_sc_table_design").find(".tr").find(".td:last").remove(),o(".tableButton.addcol:last").closest("td").remove(),o(".delcol").attr("disabled",!0),o(".delcol").removeClass("enable"));e()}}else{if(confirm("Are you sure to delete "+t+" columns?")){for(let e=0;e<t;e++)l>2&&(o(".woo_sc_table_design").find(".tr").find(".td:last").remove(),o(".tableButton.addcol:last").closest("td").remove()),2==l&&(o(".woo_sc_table_design").find(".tr").find(".td:last").remove(),o(".tableButton.addcol:last").closest("td").remove(),o(".delcol").attr("disabled",!0),o(".delcol").removeClass("enable"));e()}}}else alert("The number of deleted columns must be less than the number of columns in the current table!")}),o("#woo_sc_preview_btn").on("click",function(){if("hide_all"!==o("#woo_sc_hide").val()){if("hide_table"!==o("#woo_sc_hide").val()){let e=d();if(e.length>0){let t="<table class='woo_sc_view_table'>";for(let o=0;o<e.length;o++){t+="<tr>";for(let l=0;l<e[o].length;l++)t+=0==o?"<th>"+e[o][l]+"</th>":"<td>"+e[o][l]+"</td>";t+="</tr>"}t+="</table>",o(".printTable").html(t)}else o(".printTable").html("")}else o(".printTable").html("<span style='text-align: center;display:block;margin:15px'>Table is hidden (This message is only displayed in Preview mode)</span>");if(null==tinymce.activeEditor){let e="<strong>You need  switch to Visual in ContentEditor to preview the content</strong>";if(o(".woo_sc_modal_backend_content").html(e),"hide_image"!==o("#woo_sc_hide").val()){if(0!=o(".woo_sc_img_upload").find(".image_Uploaded").length){let e=o("#woo_sc_width_img").val();if(""!==e){let t='<img class="image_Uploaded" style="width:'+e+'%" src="';t+=o(".image_Uploaded").attr("src"),t+='">',o(".woo_sc_popup_img").html(t)}else{let e='<img class="image_Uploaded" style="width:100%" src="';e+=o(".image_Uploaded").attr("src"),e+='">',o(".woo_sc_popup_img").html(e)}}}else o(".woo_sc_popup_img").html("<span style='text-align: center;display:block;margin:15px'>Image is hidden (This message is only displayed in Preview mode)</span>")}else{let e=tinymce.activeEditor.getContent();if(o(".woo_sc_modal_backend_content").html(e),"hide_image"!==o("#woo_sc_hide").val()){if(0!=o(".woo_sc_img_upload").find(".image_Uploaded").length){let e=o("#woo_sc_width_img").val();if(""!==e){let t='<img class="image_Uploaded" style="width:'+e+'%" src="';t+=o(".image_Uploaded").attr("src"),t+='">',o(".woo_sc_popup_img").html(t)}else{let e='<img class="image_Uploaded" style="width:100%" src="';e+=o(".image_Uploaded").attr("src"),e+='">',o(".woo_sc_popup_img").html(e)}}}else o(".woo_sc_popup_img").html("<span style='text-align: center;display:block;margin:15px'>Image is hidden (This message is only displayed in Preview mode)</span>")}o(".woo_sc_view_table").find("th").css("background-color",o("#woo_sc_head_color").val()),o(".woo_sc_view_table").find("th").css("color",o("#woo_sc_text_head_color").val());let e=o(".woo_sc_view_table").find("tr").length;for(let t=0;t<e;t++)t>0&&t%2==0?(o(".woo_sc_view_table").find("tr").eq(t).css("background-color",o("#woo_sc_even_rows_color").val()),o(".woo_sc_view_table").find("tr").eq(t).css("color",o("#woo_sc_even_rows_text_color").val())):(o(".woo_sc_view_table").find("tr").eq(t).css("background-color",o("#woo_sc_odd_rows_color").val()),o(".woo_sc_view_table").find("tr").eq(t).css("color",o("#woo_sc_odd_rows_text_color").val()));o(".woo_sc_view_table").find("th").css("border-top",o("#woo_sc_horizontal_width").val()+"px "+o("#woo_sc_horizontal_border_style").val()+" "+o("#woo_sc_border_color").val()),o(".woo_sc_view_table").find("th").css("border-bottom",o("#woo_sc_horizontal_width").val()+"px "+o("#woo_sc_horizontal_border_style").val()+" "+o("#woo_sc_border_color").val()),o(".woo_sc_view_table").find("th").css("border-left",o("#woo_sc_vertical_width").val()+"px "+o("#woo_sc_vertical_border_style").val()+" "+o("#woo_sc_border_color").val()),o(".woo_sc_view_table").find("th").css("border-right",o("#woo_sc_vertical_width").val()+"px "+o("#woo_sc_vertical_border_style").val()+" "+o("#woo_sc_border_color").val()),o(".woo_sc_view_table").find("td").css("border-top",o("#woo_sc_horizontal_width").val()+"px "+o("#woo_sc_horizontal_border_style").val()+" "+o("#woo_sc_border_color").val()),o(".woo_sc_view_table").find("td").css("border-bottom",o("#woo_sc_horizontal_width").val()+"px "+o("#woo_sc_horizontal_border_style").val()+" "+o("#woo_sc_border_color").val()),o(".woo_sc_view_table").find("td").css("border-left",o("#woo_sc_vertical_width").val()+"px "+o("#woo_sc_vertical_border_style").val()+" "+o("#woo_sc_border_color").val()),o(".woo_sc_view_table").find("td").css("border-right",o("#woo_sc_vertical_width").val()+"px "+o("#woo_sc_vertical_border_style").val()+" "+o("#woo_sc_border_color").val())}else o(".printTable").html(""),o(".woo_sc_popup_img").html("<span style='text-align: center;display:block;margin:15px'>All hidden (This message is only displayed in Preview mode)</span>");o(".vi-ui.modal").modal("show")}),o(".button.woo_sc_close").on("click",function(){o(".vi-ui.modal").modal("hide")}),o("#woo_sc_up_image").on("click",function(e){o(this);var t=wp.media({title:"Insert image",library:{type:"image"},button:{text:"Use this image"},multiple:!1}).open().on("select",function(){var e=t.state().get("selection").first().toJSON();s=e.url,o(".woo_sc_img_upload").show().html('<img class="image_Uploaded" src="'+e.url+'" style="width:95%;display:inline-block;" />'),o(".woo_sc_popup_img").show().html('<img class="image_Uploaded" src="'+e.url+'" style="max-width:800px;display:inline-block;" />'),o(".woo_sc_width_img_margin").show(),o(".remove_image_button").show()})}),0!=o(".woo_sc_img_upload").find(".image_Uploaded").length&&(s=o(".image_Uploaded").attr("src"),o(".woo_sc_width_img_margin").show(),o(".remove_image_button").show()),o("body").on("click",".remove_image_button",function(){s="";let e='<img class="image_Default" style="width:95%;margin: 0 auto; display:inline-block;" src="';e+=tran_link.link,e+='">',o(".woo_sc_img_upload").html(e),o(".woo_sc_popup_img").hide(),o(".woo_sc_width_img_margin").hide(),o(".remove_image_button").hide()}),o("#post").find("#publish").on("click",function(e){if(""!=o("#title").val()){let e=d();if(0!==e.length){let t=JSON.stringify(e),l=o("<input>").attr({name:"tableArray",value:t});o(this).append(l)}let t=o("<input>").attr({name:"imgLink",value:s});return o(this).append(t),!0}e.preventDefault(),o("#title").focus(),o("#title").css("background-color","#FDB6B6"),o("#title").after('<span style="color:#F40000" class="spanerr">Title is required</span>')}),o("#post").find("#title").keypress(function(){o(".spanerr").remove(),o("#title").css("background-color","#ffffff")}),o(".check_box_cate").on("change",function(){let e=o(this).prop("checked"),t=o(this),l=t.val();t.closest("ul").find("input[data-parent="+l+"]").prop("checked",e).trigger("change")}),o("#sc_input_search_product_id").select2({minimumInputLength:3,placeholder:"Product name...",ajax:{type:"post",url:tran_link.adminAjax,data:function(o){return{key_search:o.term,type:"public",action:"size_chart_search_product"}},processResults:function(o){return o}}}),o(".button.sc_btn_reset").on("click",function(){confirm("Are you sure to reset table?")&&o(".woo_sc_table_design").find(".td").find('input[type="text"]').val("")}),o("#woo_sc_head_color").wpColorPicker({change:function(e,t){o(".woo_sc_table_design").find(".tr:first").find(".td").css({backgroundColor:t.color.toString()}),o(".woo_sc_table_design").find(".tr:first").find(".td").find('input[type="text"]').css({backgroundColor:t.color.toString()})}}),o("#woo_sc_text_head_color").wpColorPicker({change:function(e,t){o(".tr:first").find(".td").find('input[type="text"]').css({color:t.color.toString()})}}),o("#woo_sc_even_rows_color").wpColorPicker({change:function(e,t){let l=o(".woo_sc_table_design").find(".tr").length;for(let e=0;e<l;e++)e>0&&e%2==0&&(o(".woo_sc_table_design").find(".tr").eq(e).find(".td").css({backgroundColor:t.color.toString()}),o(".woo_sc_table_design").find(".tr").eq(e).find('input[type="text"]').css({backgroundColor:t.color.toString()}))}}),o("#woo_sc_even_rows_text_color").wpColorPicker({change:function(e,t){let l=o(".tr").length;for(let e=1;e<l;e++)e>0&&e%2==0&&o(".woo_sc_table_design").find(".tr").eq(e).find(".td").find('input[type="text"]').css({color:t.color.toString()})}}),o("#woo_sc_odd_rows_color").wpColorPicker({change:function(e,t){let l=o(".woo_sc_table_design").find(".tr").length;for(let e=0;e<l;e++)e>0&&e%2!=0&&(o(".woo_sc_table_design").find(".tr").eq(e).find(".td").css({backgroundColor:t.color.toString()}),o(".woo_sc_table_design").find(".tr").eq(e).find('input[type="text"]').css({backgroundColor:t.color.toString()}))}}),o("#woo_sc_odd_rows_text_color").wpColorPicker({change:function(e,t){let l=o(".tr").length;for(let e=1;e<l;e++)e>0&&e%2!=0&&o(".woo_sc_table_design").find(".tr").eq(e).find(".td").find('input[type="text"]').css({color:t.color.toString()})}}),o("#woo_sc_border_color").wpColorPicker({change:function(e,t){o(".woo_sc_table_design").find(".tr").find(".td").css({borderColor:t.color.toString()})}}),o("#sc_import_csv_btn").on("click",function(){o("#sc_import_csv").trigger("click")}),o("#sc_import_csv").on("change",function(){var l=document.querySelector("#sc_import_csv").files[0];if("csv"!=l.name.split(".").pop().toLowerCase())alert("Required file extension is CSV!");else if(confirm("Size chart in CSV file will replace the current table?")){let d,_,i,c="",n="";d=o(".woo_sc_table_design").find(".tr").length,_=o(".woo_sc_table_design").find(".tr:first").find(".td").length,i=o(".woo_sc_table_design").find("tr:first").find("td").length;var s=new FileReader;s.readAsText(l),s.onload=function(l){var s=l.target.result.split("\n").filter(o=>""!=o);let a=s.length;if((c=a-d)<0){let e=Math.abs(c);for(let t=0;t<e;t++)o(".woo_sc_table_design").find(".tr:last").remove()}else{for(let e=0;e<c;e++)o(".woo_sc_table_design").append(t(_));o(".tr").length>1&&(o(".delrows").removeAttr("disabled"),o(".delrows").addClass("enable"))}for(var f=[],w=0;w<s.length;w++){let o=s[w].split(",");f[w]=o.length}var b=Math.max.apply(Math,f);if((n=b-i+1)<0){let e=Math.abs(n);for(let t=0;t<e;t++)o(".woo_sc_table_design").find(".tr").find(".td:last").remove(),o(".tableButton.addcol:last").closest("td").remove()}else{let e="<td>";e+="<div class='woo_sc_div_tablebutton_cols'><button  type='button'  class='tableButton addcol'>+</button><button  type='button'  class='tableButton delcol' disabled>-</button></div>",e+="</td>";let t="<td class='td'>";t+="<div class='woo_sc_table_input'><input type='text' class='input' name='inputTable'  placeholder='Enter text..' autocomplete='off'></div>",t+="</td>";for(let t=0;t<n;t++)o(".woo_sc_table_design").find("tr").eq(0).find("td").eq(_-1).before(e);for(let e=0;e<n;e++)o(".addrows").closest("td").before(t);o(".delcol").length>1&&(o(".delcol").removeAttr("disabled"),o(".delcol").addClass("enable"))}o(".woo_sc_table_design").find(".td").find('input[type="text"]').val("");for(w=0;w<s.length;w++)for(var g=s[w].split(","),h=0;h<g.length;h++){var u=g[h];o(".woo_sc_table_design").find(".tr").eq(w).find(".td").eq(h).find('input[type="text"]').val(u)}e(),r()},o("#sc_import_csv").val("")}else o("#sc_import_csv").val("")}),o("#woo_sc_horizontal_width").on("change",function(){let e=o("#woo_sc_horizontal_width").val()+"px "+(o("#woo_sc_horizontal_border_style").val()+" ")+o("#woo_sc_border_color").val();o(".woo_sc_table_design").find(".td").css("border-top",e),o(".woo_sc_table_design").find(".td").css("border-bottom",e)}),o("#woo_sc_vertical_width").on("change",function(){let e=o("#woo_sc_vertical_width").val(),t=o("#woo_sc_border_color").val(),l=e+"px "+o("#woo_sc_vertical_border_style").val()+" "+t;o(".woo_sc_table_design").find(".td").css("border-left",l),o(".woo_sc_table_design").find(".td").css("border-right",l)}),o("#woo_sc_horizontal_border_style").on("change",function(){let e=o("#woo_sc_horizontal_border_style").val(),t=o("#woo_sc_horizontal_width").val()+"px "+e+" "+o("#woo_sc_border_color").val();o(".woo_sc_table_design").find(".td").css("border-top",t),o(".woo_sc_table_design").find(".td").css("border-bottom",t)}),o("#woo_sc_vertical_border_style").on("change",function(){let e=o("#woo_sc_vertical_border_style").val(),t=o("#woo_sc_vertical_width").val()+"px "+e+" "+o("#woo_sc_border_color").val();o(".woo_sc_table_design").find(".td").css("border-left",t),o(".woo_sc_table_design").find(".td").css("border-right",t)}),o("#woo_sc_border_color").on("change",function(){let e=o("#woo_sc_border_color").val();o(".woo_sc_table_design").find(".td").css("border-color",e)}),r(),o("#woo_sc_template").on("change",function(){let e=o("#woo_sc_template").val();"tem_black"===e&&_("#000000","#ffffff","#dbdbdb","#000000","#ffffff","#000000","0","dotted","1","dotted"),"tem_blue"===e&&_("#2185d0","#FFFFFF","#cceafc","#000000","#FFFFFF","#000000","0","","0"),"tem_red"===e&&_("#db2828","#FFFFFF","#ffd9d8","#000000","#FFFFFF","#000000","","","0","","#ea0707"),"tem_teal"===e&&_("#00b5ad","#FFFFFF","#bfecff","#227dd8","#edf8ff","#227dd8","2","","2","","#ffffff"),"tem_orange"===e&&_("#ff772e","#ffffff","#ffefe0","#c10000","#ffffff","#666666","0","","0"),"tem_oliver"===e&&_("#b5cc18","#ffffff","#d6ffbf","#227dd8","#edfff3","#227dd8","0","","1","","#77ce48"),"tem_green"===e&&_("#21ba45","#ffffff","#c1ffd1","#0084d1","#ffffff","#d80000","1","","0","","#21ba45"),"tem_purple"===e&&_("#a333c8","#ffffff","#f1bcff","#0015ff","#fbf4ff","#0015ff","0","","1","","#ffffff"),"tem_pink"===e&&_("#f9638b","#ffffff","#ffbcce","#eb596e","#ffffea","#eb596e","0","","0"),"tem_yellow"===e&&_("#fbbd08","#4d375d","#ffffc1","#ef4f4f","#fcfff7","#ef4f4f","1","dashed","1","dashed","#ff8577")})});